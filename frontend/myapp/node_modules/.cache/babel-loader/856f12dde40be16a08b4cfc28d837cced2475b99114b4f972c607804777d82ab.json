{"ast":null,"code":"import _defineProperty from\"/Users/anyagapyuk/Desktop/nature-aestethic/frontend/myapp/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/anyagapyuk/Desktop/nature-aestethic/frontend/myapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/anyagapyuk/Desktop/nature-aestethic/frontend/myapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Fragment,useState,useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{useAlert}from\"react-alert\";import MetaData from\"../layout/MetaData\";import{useNavigate}from\"react-router-dom\";import{register,clearErrors}from\"../../actions/userActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Register=function Register(){var _useState=useState({name:\"\",email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var name=user.name,email=user.email,password=user.password;var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),avatar=_useState4[0],setAvatar=_useState4[1];var _useState5=useState(\"/images/default_image.png\"),_useState6=_slicedToArray(_useState5,2),avatarPreview=_useState6[0],setAvatarPreview=_useState6[1];var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.auth;}),isAuthenticated=_useSelector.isAuthenticated,error=_useSelector.error,loading=_useSelector.loading;var navigate=useNavigate();useEffect(function(){if(isAuthenticated){navigate(\"/\");}if(error){alert.error(error);dispatch(clearErrors());}},[dispatch,alert,isAuthenticated,navigate,error]);var submitHandler=function submitHandler(e){e.preventDefault();var formData=new FormData();formData.set(\"name\",name);formData.set(\"email\",email);formData.set(\"password\",password);formData.set(\"avatar\",avatar);dispatch(register(formData));};var onChange=function onChange(e){if(e.target.name===\"avatar\"){var reader=new FileReader();reader.onload=function(){if(reader.readyState===2){setAvatarPreview(reader.result);setAvatar(reader.result);}};reader.readAsDataURL(e.target.files[0]);}else{setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},e.target.name,e.target.value)));}};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:\"Register user\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-10 col-lg-5\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"shadow-lg\",onSubmit:submitHandler,encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-3\",children:\"Register\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email_field\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"name\",id:\"name_field\",className:\"form-control\",name:\"name\",value:name,onChange:onChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email_field\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email_field\",className:\"form-control\",name:\"email\",value:email,onChange:onChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password_field\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password_field\",className:\"form-control\",name:\"password\",value:password,onChange:onChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"avatar_upload\",children:\"Avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"figure\",{className:\"avatar mr-3 item-rtl\",children:/*#__PURE__*/_jsx(\"img\",{src:avatarPreview,className:\"rounded-circle\",alt:\"avatar preview\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"custom-file\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"avatar\",className:\"custom-file-input\",id:\"customFile\",accept:\"images/*\",onChange:onChange}),/*#__PURE__*/_jsx(\"label\",{className:\"custom-file-label\",htmlFor:\"customFile\",children:\"Choose Avatar\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{id:\"register_button\",type:\"submit\",className:\"btn btn-block py-3\",disabled:loading?true:false,children:\"REGISTER\"})]})})})]});};export default Register;","map":{"version":3,"names":["React","Fragment","useState","useEffect","useDispatch","useSelector","useAlert","MetaData","useNavigate","register","clearErrors","jsx","_jsx","jsxs","_jsxs","Register","_useState","name","email","password","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","avatar","setAvatar","_useState5","_useState6","avatarPreview","setAvatarPreview","alert","dispatch","_useSelector","state","auth","isAuthenticated","error","loading","navigate","submitHandler","e","preventDefault","formData","FormData","set","onChange","target","reader","FileReader","onload","readyState","result","readAsDataURL","files","_objectSpread","_defineProperty","value","children","title","className","onSubmit","encType","htmlFor","type","id","src","alt","accept","disabled"],"sources":["/Users/anyagapyuk/Desktop/nature-aestethic/frontend/myapp/src/components/user/Register.js"],"sourcesContent":["import React, { Fragment, useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useAlert } from \"react-alert\";\n\nimport MetaData from \"../layout/MetaData\";\nimport { useNavigate } from \"react-router-dom\";\nimport { register, clearErrors } from \"../../actions/userActions\";\n\nconst Register = () => {\n  const [user, setUser] = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n  });\n\n  const { name, email, password } = user;\n  const [avatar, setAvatar] = useState(\"\");\n  const [avatarPreview, setAvatarPreview] = useState(\n    \"/images/default_image.png\"\n  );\n\n  const alert = useAlert();\n  const dispatch = useDispatch();\n\n  const { isAuthenticated, error, loading } = useSelector(\n    (state) => state.auth\n  );\n\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (isAuthenticated) {\n      navigate(\"/\");\n    }\n\n    if (error) {\n      alert.error(error);\n      dispatch(clearErrors());\n    }\n  }, [dispatch, alert, isAuthenticated, navigate, error]);\n\n  const submitHandler = (e) => {\n    e.preventDefault();\n\n    const formData = new FormData();\n    formData.set(\"name\", name);\n    formData.set(\"email\", email);\n    formData.set(\"password\", password);\n    formData.set(\"avatar\", avatar);\n    dispatch(register(formData));\n  };\n\n  const onChange = (e) => {\n    if (e.target.name === \"avatar\") {\n      const reader = new FileReader();\n      reader.onload = () => {\n        if (reader.readyState === 2) {\n          setAvatarPreview(reader.result);\n          setAvatar(reader.result);\n        }\n      };\n      reader.readAsDataURL(e.target.files[0]);\n    } else {\n      setUser({ ...user, [e.target.name]: e.target.value });\n    }\n  };\n\n  return (\n    <Fragment>\n      <MetaData title={\"Register user\"} />\n      <div className=\"row wrapper\">\n        <div className=\"col-10 col-lg-5\">\n          <form\n            className=\"shadow-lg\"\n            onSubmit={submitHandler}\n            encType=\"multipart/form-data\"\n          >\n            <h1 className=\"mb-3\">Register</h1>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"email_field\">Name</label>\n              <input\n                type=\"name\"\n                id=\"name_field\"\n                className=\"form-control\"\n                name=\"name\"\n                value={name}\n                onChange={onChange}\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"email_field\">Email</label>\n              <input\n                type=\"email\"\n                id=\"email_field\"\n                className=\"form-control\"\n                name=\"email\"\n                value={email}\n                onChange={onChange}\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"password_field\">Password</label>\n              <input\n                type=\"password\"\n                id=\"password_field\"\n                className=\"form-control\"\n                name=\"password\"\n                value={password}\n                onChange={onChange}\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"avatar_upload\">Avatar</label>\n              <div className=\"d-flex align-items-center\">\n                <div>\n                  <figure className=\"avatar mr-3 item-rtl\">\n                    <img\n                      src={avatarPreview}\n                      className=\"rounded-circle\"\n                      alt=\"avatar preview\"\n                    />\n                  </figure>\n                </div>\n                <div className=\"custom-file\">\n                  <input\n                    type=\"file\"\n                    name=\"avatar\"\n                    className=\"custom-file-input\"\n                    id=\"customFile\"\n                    accept=\"images/*\"\n                    onChange={onChange}\n                  />\n                  <label className=\"custom-file-label\" htmlFor=\"customFile\">\n                    Choose Avatar\n                  </label>\n                </div>\n              </div>\n            </div>\n\n            <button\n              id=\"register_button\"\n              type=\"submit\"\n              className=\"btn btn-block py-3\"\n              disabled={loading ? true : false}\n            >\n              REGISTER\n            </button>\n          </form>\n        </div>\n      </div>\n    </Fragment>\n  );\n};\n\nexport default Register;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}