{"ast":null,"code":"import React,{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Navigate}from\"react-router-dom\";import{loadUser}from\"../../actions/userActions\";import{jsx as _jsx}from\"react/jsx-runtime\";var ProtectedRoute=function ProtectedRoute(_ref){var isAdmin=_ref.isAdmin,children=_ref.children;var _useSelector=useSelector(function(state){return state.auth;}),_useSelector$isAuthen=_useSelector.isAuthenticated,isAuthenticated=_useSelector$isAuthen===void 0?false:_useSelector$isAuthen,_useSelector$loading=_useSelector.loading,loading=_useSelector$loading===void 0?true:_useSelector$loading,user=_useSelector.user;var dispatch=useDispatch();useEffect(function(){if(!user){dispatch(loadUser());}},[isAuthenticated,loading]);if(loading)return/*#__PURE__*/_jsx(\"h1\",{children:\"loading...\"});if(!loading&&isAuthenticated){if(isAdmin===true&&user.role!==\"admin\"){return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});}return children;}else{return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});}};export default ProtectedRoute;","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","Navigate","loadUser","jsx","_jsx","ProtectedRoute","_ref","isAdmin","children","_useSelector","state","auth","_useSelector$isAuthen","isAuthenticated","_useSelector$loading","loading","user","dispatch","role","to"],"sources":["/Users/anyagapyuk/Desktop/nature-aestethic/frontend/myapp/src/components/route/ProtectedRoute.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Navigate } from \"react-router-dom\";\nimport { loadUser } from \"../../actions/userActions\";\n\nconst ProtectedRoute = ({ isAdmin, children }) => {\n  const {\n    isAuthenticated = false,\n    loading = true,\n    user,\n  } = useSelector((state) => state.auth);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (!user) {\n      dispatch(loadUser());\n    }\n  }, [isAuthenticated, loading]);\n\n  if (loading) return <h1>loading...</h1>;\n  if (!loading && isAuthenticated) {\n    if (isAdmin === true && user.role !== \"admin\") {\n      return <Navigate to=\"/\" />;\n    }\n    return children;\n  } else {\n    return <Navigate to={\"/login\"} />;\n  }\n};\n\nexport default ProtectedRoute;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,OAASC,QAAQ,KAAQ,2BAA2B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAErD,GAAM,CAAAC,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAAC,IAAA,CAA8B,IAAxB,CAAAC,OAAO,CAAAD,IAAA,CAAPC,OAAO,CAAEC,QAAQ,CAAAF,IAAA,CAARE,QAAQ,CACzC,IAAAC,YAAA,CAIIT,WAAW,CAAC,SAACU,KAAK,QAAK,CAAAA,KAAK,CAACC,IAAI,GAAC,CAAAC,qBAAA,CAAAH,YAAA,CAHpCI,eAAe,CAAfA,eAAe,CAAAD,qBAAA,UAAG,KAAK,CAAAA,qBAAA,CAAAE,oBAAA,CAAAL,YAAA,CACvBM,OAAO,CAAPA,OAAO,CAAAD,oBAAA,UAAG,IAAI,CAAAA,oBAAA,CACdE,IAAI,CAAAP,YAAA,CAAJO,IAAI,CAEN,GAAM,CAAAC,QAAQ,CAAGlB,WAAW,CAAC,CAAC,CAE9BD,SAAS,CAAC,UAAM,CACd,GAAI,CAACkB,IAAI,CAAE,CACTC,QAAQ,CAACf,QAAQ,CAAC,CAAC,CAAC,CACtB,CACF,CAAC,CAAE,CAACW,eAAe,CAAEE,OAAO,CAAC,CAAC,CAE9B,GAAIA,OAAO,CAAE,mBAAOX,IAAA,OAAAI,QAAA,CAAI,YAAU,CAAI,CAAC,CACvC,GAAI,CAACO,OAAO,EAAIF,eAAe,CAAE,CAC/B,GAAIN,OAAO,GAAK,IAAI,EAAIS,IAAI,CAACE,IAAI,GAAK,OAAO,CAAE,CAC7C,mBAAOd,IAAA,CAACH,QAAQ,EAACkB,EAAE,CAAC,GAAG,CAAE,CAAC,CAC5B,CACA,MAAO,CAAAX,QAAQ,CACjB,CAAC,IAAM,CACL,mBAAOJ,IAAA,CAACH,QAAQ,EAACkB,EAAE,CAAE,QAAS,CAAE,CAAC,CACnC,CACF,CAAC,CAED,cAAe,CAAAd,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}